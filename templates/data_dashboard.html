{% extends "base.html" %}
{% block content %}

<div class="dashboard-container d-flex">
    <!-- Filter Section -->
    <div class="filter-section p-3 border-end" style="width: 200px;">
        <h4>Filter Data</h4>
        <form method="GET" action="{{ url_for('data_dashboard') }}">
            <label for="start_date" class="form-label">Start Date:</label>
            <input type="date" id="start_date" name="start_date" class="form-control mb-3" value="{{ start_date }}">

            <label for="end_date" class="form-label">End Date:</label>
            <input type="date" id="end_date" name="end_date" class="form-control mb-3" value="{{ end_date }}">

            <button type="submit" class="btn btn-primary w-100">Apply</button>
        </form>
    </div>

    <!-- Data Section -->
    <div class="data-section flex-grow-1 p-3">
        <div class="grid-dashboard">

            <!-- rime card -->
            <section class="data-card">
                <h2>Visit Timing</h2>
                <div class="metric"><strong>Total Visits:</strong> {{ total_student_count }}</div>
                <div class="metric"><strong>Distinct Students:</strong> {{ distinct_student_count }}</div>
                <div class="metric"><strong>Avg Visits/User:</strong> {{ avg_visits_per_user }}</div>
            </section>
            
            <!-- food card -->
            <section class="data-card">
                <h2>Food Distribution</h2>
                <div class="metric"><strong>Total Lbs Distributed:</strong> {{ total_pounds_taken }}</div>
                <div class="metric"><strong>Avg Lbs/Day:</strong> {{ avg_lbs_per_day }}</div>
            </section>

            <!-- clothing card -->
            <section class="data-card">
                <h2>Clothing Info</h2>
                <div class="metric"><strong>Total Items Taken:</strong> {{ total_clothes_taken }}</div>
            </section>

            <!-- lbs per day -->
            <section class="data-card">
                <h2>Pounds Taken Per Day (Monday to Friday)</h2>
                <ul>
                    {% for day, pounds in pounds_per_day.items() %}
                        <li><strong>{{ day }}:</strong> {{ pounds }} lbs</li>
                    {% endfor %}
                </ul>
            </section>
        </div>
    </div>
</div>
{% endblock %}
